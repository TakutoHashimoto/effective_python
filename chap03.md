# 関数
## 19. 複数の戻り値では、4個以上の変数なら、決してアンパックしない
### Summary
* 関数で複数の値を返すには、それらをタプルに入れて、呼び出し側でPythonのアンパック構文を使うことができる。
* 関数からの複数の戻り値は `catch-all` のアスタリスク付きの引数でアンパックすることもできる。
* 4個以上の変数をアンパックするのはエラーになりやすいので避けて、代わりに軽量なクラスか `namedtuple` インスタンスを使う。


## 20. `None` を返すのではなく例外を送出する
### Summary
* `None` を返して、特別な意味を示す関数は、`None` と（例えば、ゼロ・空文字列など）他の値とがすべて条件式において `False` に評価されるので、エラーを引き起こしやすい。
* `None` を返す代わりに、例外を送出して、特別な条件を示すようにする。呼び出し元のコードで、その処理が文書化されており、適切に例外処理することを期待する。
* 型ヒントを使って、関数が特別な場合にも絶対に `None` を返さないことを明示できる。


## 21. クロージャが変数スコープとどう関わるかを把握しておく
### Summary
* クロージャ関数は、定義されたスコープのどれからでも変数を参照できる。
* デフォルトでは、クロージャ内での変数への代入は外部のスコープには影響しない。
* `nonlocal` 文を用いて、クロージャが外のスコープにある変数を修正できる。
* `nonlocal` 文を単純な関数でのみ使うようにする。


## 22. 可変長位置引数を使って、見た目をすっきりさせる
### Summary
* 関数は、`def` 文で `*args` を使うことにより、可変個数の位置引数を受け入れられる。
* `*` 演算子を関数に用いて、シーケンスからの要素を位置引数として使える。
* `*` 演算子をジェネレータと一緒に使うと、プログラムがメモリを使い果たしてクラッシュすることがある。
* `*args` を使う関数に新たに位置パラメータを追加すると、発見が困難なバグを生み出してしまう危険性がある。


## 23. キーワード引数にオプションの振る舞いを与える
### Summary
* 関数の引数は、位置またはキーワードによって指定できる。
* キーワード引数は、位置引数だけでは紛らわしい場合に、各引数の目的を明らかにする。
* デフォルト値を設定したキーワード引数なら、すべての既存の呼び出し元を変更しなくても、その関数に新たな振る舞いを簡単に追加できる。
* オプションのキーワード引数は、位置ではなくキーワードで常に渡すべきだ。


## 24. 動的なデフォルト引数を指定するときには `None` とdocstringを使う
### Summary
* デフォルト引数は一度しか評価されない。モジュールの読み込み時の関数定義のときだけである。これによって、（`{}`, `[]` や `datetime.now()` のような）動的な値が奇妙な振る舞いをすることがある。
* 動的な値を持つキーワード引数のデフォルト引数には `None` を用いる。実際の振る舞いを関数のdocstringに記述しておく。
* キーワード引数のデフォルト値を表すために `None` を使用しても、型ヒントで正しく動作する。


## 25. キーワード専用引数と位置専用引数で明確さを高める
### Summary
* キーワード専用引数を用いることで、特に、複数の論理型フラグを使う場合など紛らわしい関数呼び出しの際に、呼び出し元に、キーワード引数を与えるように強制でき、関数呼び出しの意図が明確になる。キーワード専用引数は、引数リストの1つの `*` のあととして定義される。
* 位置専用引数では、呼び出し元はキーワードを使って渡せないので、引数名への依存性が減らせる。位置専用引数は、引数リストの1つ前の `/` の前として定義される。
* 引数リストの記号 `/` と `*` の間にある引数は、位置でもキーワードでも渡せる。これがPython引数のデフォルトだ。


## 26. `functools.wraps` を使って関数デコレータを定義する
### Summary
* Pythonのデコレータ構文を使うと、ある関数が他の関数の実行時に修正できる。
* デコレータを使うことでデバッガのようなイントロスペクションを行うツールに奇妙な振る舞いを引き起こすことがある。
* 問題を引き起こさないようにデコレータを自分で定義するときには、組み込みモジュール `functools` のデコレータ `wraps` を使う。